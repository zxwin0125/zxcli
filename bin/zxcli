#!/usr/bin/env node

const fs = require('fs');
const path = require('path');

// dev
const devMode = fs.existsSync(path.join(__dirname, '../tsconfig.json'));

// 命令行强制走编译版本
const wantsCompiled = process.argv.slice(2).indexOf('--compiled-build') >= 0;

if (!devMode || wantsCompiled) {
	// 生产环境
	require('../lib/cli');
} else {
	// dev 环境
	require('ts-node').register({ files: path.join(__dirname, '../tsconfig.json') });

	require('../src/cli');
}
